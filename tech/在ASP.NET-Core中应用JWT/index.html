<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Ganymede"><meta property="og:type" content="article"><meta property="og:image" content="https://dukezys.github.io/img/02s.jpg"><meta property="twitter:image" content="https://dukezys.github.io/img/02s.jpg"><meta name=title content="在ASP.NET-Core中实现内容协商"><meta property="og:title" content="在ASP.NET-Core中实现内容协商"><meta property="twitter:title" content="在ASP.NET-Core中实现内容协商"><meta name=description content="介绍在ASP.NET-Core中实现内容协商"><meta property="og:description" content="介绍在ASP.NET-Core中实现内容协商"><meta property="twitter:description" content="介绍在ASP.NET-Core中实现内容协商"><meta property="twitter:card" content="summary"><meta name=keyword content="Duke, DukeSaika, Ganymede-, Ganymede, Blog, Duke的博客, 博客, 个人网站, 互联网, Web, .NET, Go, 分布式, Kubernetes, 微服务, Microservice"><link rel="shortcut icon" href=/img/favicon.ico><title>在ASP.NET-Core中实现内容协商-Duke's Blog</title><link rel=canonical href=/tech/%E5%9C%A8ASP.NET-Core%E4%B8%AD%E5%BA%94%E7%94%A8JWT/><link rel=stylesheet href=/css/iDisqus.min.css><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/ style=color:#000>Ganymede</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/ style=color:#000>Home</a></li><li><a href=/categories/tech style=color:#000>tech</a></li><li><a href=/top/books/ style=color:#000>BOOKS</a></li><li><a href=/top/about/ style=color:#000>ABOUT</a></li><li><a href=/search style=color:#000><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/img/02s.jpg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/.net title=.NET>.NET</a>
<a class=tag href=/tags/asp.net title=ASP.NET>ASP.NET</a></div><h1>在ASP.NET-Core中实现内容协商</h1><h2 class=subheading></h2><span class=meta>Posted by
 Duke
on
Tuesday, May 11, 2021</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h1 id=在aspnet-core中实现内容协商>在ASP.NET Core中实现内容协商</h1><h2 id=1-使用formatter实现内容协商><strong>1. 使用Formatter实现内容协商</strong></h2><h3 id=controller-action返回类型><strong>Controller Action返回类型</strong></h3><p>在内容协商之前，先看看在ASP.NET Core中Controller Action中到底有哪几种返回类型：</p><ul><li><strong>Specific type</strong>: 例如返回string，或是直接返回IEnumerable。此外，actions能够返回POCOs（Plain Old CLR Objects）。当一个POCO返回时，会自动创建一个包含POCO的ObjectResult，如果object是null，返回204 No Content。</li><li><strong>IActionResult</strong>：IActionResult其实是一个接口，ActionResult实现了IActionResult，可以返回任何继承了ActionResult的非抽象类。有一些现有的返回类型可以直接使用，比如OkObjectResult()，BadRequestResult()等。在ControllerBase中，提供了一些更便捷的方法，例如Ok()，相当于new OkObjectResult()。</li><li>[ProducesResponseType]：因为通过IActionResult可以返回多种类型，可以使用这个attribute指明action返回的指定类型和相应的HTTP status code：</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#50fa7b>[HttpGet]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>[ProducesResponseType(StatusCodes.Status200OK, Type = typeof(Coffee))]</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>public</span> IActionResult Get()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>   <span style=color:#8be9fd>var</span> coffeeList = <span style=color:#ff79c6>new</span> List&lt;Coffee&gt;
</span></span><span style=display:flex><span>   {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>new</span> Coffee(<span style=color:#f1fa8c>&#34;Americano&#34;</span>, <span style=color:#f1fa8c>&#34;large&#34;</span>, <span style=color:#f1fa8c>&#34;$3.99&#34;</span>),
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>new</span> Coffee(<span style=color:#f1fa8c>&#34;Cappuccino&#34;</span>, <span style=color:#f1fa8c>&#34;medium&#34;</span>, <span style=color:#f1fa8c>&#34;$2.49&#34;</span>)
</span></span><span style=display:flex><span>   };
</span></span><span style=display:flex><span>   <span style=color:#ff79c6>return</span> Ok(coffeeList);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><strong>ActionResult</strong>: 使用ActionResult 可以返回继承ActionResult的类或者一个指定的类型。对比IActionResult：</li><li>不需要在[ProducesResponseType]中指定Type。</li><li>当返回值时，T可以被转换成ObjectResult，可以直接return T;</li></ul><h3 id=实现内容协商><strong>实现内容协商</strong></h3><p>在ASP.NET Core，是通过各种各样的Formatters来对数据进行处理，从数据流向的角度看，有两大类的Formatter：</p><ul><li><strong>InputFormatter</strong>：读取一个Request Body中的数据。</li><li><strong>OutputFormatter</strong>：将一个对象写到输出流中。</li></ul><p>Formatters都会通过分别继承以上两个虚拟类，来实现想要format的数据形式。ASP.NET Core默认支持application/json，text/json和text/plain媒体类型。当一个POCO (Plain Old CLR Objects) 被action返回时，会自动创建一个包含POCO的ObjectResult，如果object是null，返回204 No Content。</p><p>下面以XML为例看看如何添加各类的Formatters：</p><p>如果客户端需要XML格式的数据，那么需要在请求头部设置Accept为application/xml。ASP.NET Core默认不支持application/xml这种媒体类型，需要使用在AddControllers方法中，使用(MvcOptions) options.OutputFormatters.Insert(int index, IOutputFormatter item)去添加OutputFormatter，Insert方法接受两个参数index和item，index为Formatter的顺序，item则为相应的Formatter：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>services.AddControllers(options =&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    options.OutputFormatters.Insert(<span style=color:#bd93f9>0</span>, <span style=color:#ff79c6>new</span> XmlDataContractSerializerOutputFormatter());
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>或者也可以这样，会直接被加到序列最后的位置：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>services.AddControllers(options =&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>   options.OutputFormatters.Add(<span style=color:#ff79c6>new</span> XmlDataContractSerializerOutputFormatter());
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>但现在，可以直接用AddXmlSerializerFormatters方法直接添加XML Formatter，会帮助你自动实现XML In/OutFormatter 的添加：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>services.AddControllers().AddXmlSerializerFormatters();
</span></span></code></pre></div><p>当ReturnHttpNotAcceptable被设为true时，如果没有对应的Formatter或是请求的类型不在Produces指定的范围内，则会返回406 Not Acceptable，如果为false，则会按照顺序返回相应的媒体类型。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>options.ReturnHttpNotAcceptable = <span style=color:#ff79c6>true</span>;
</span></span></code></pre></div><h3 id=指定媒体类型><strong>指定媒体类型</strong></h3><p>可以使用Attribute [Produces]来限制接受的媒体类型，媒体类型可以被用在action，controller或者global scope。如果是controller scope，则会让所有actions都返回指定的类型。</p><p>比如以下action，指定了类型为XML，如果Header中Accept是application/json，依旧会返回XML（需要options.ReturnHttpNotAcceptable为false，否则返回406）。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#50fa7b>[HttpGet]</span>
</span></span><span style=display:flex><span><span style=color:#50fa7b>[Produces(&#34;application/xml&#34;)]</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>public</span> ActionResult&lt;List&lt;Coffee&gt;&gt; Get()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#8be9fd>var</span> coffeeList = <span style=color:#ff79c6>new</span> List&lt;Coffee&gt;
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>new</span> Coffee(<span style=color:#f1fa8c>&#34;Americano&#34;</span>, <span style=color:#f1fa8c>&#34;large&#34;</span>, <span style=color:#f1fa8c>&#34;$3.99&#34;</span>),
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>new</span> Coffee(<span style=color:#f1fa8c>&#34;Cappuccino&#34;</span>, <span style=color:#f1fa8c>&#34;medium&#34;</span>, <span style=color:#f1fa8c>&#34;$2.49&#34;</span>)
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> Ok(coffeeList);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=built-in-formatters><strong>Built-in Formatters</strong></h3><p>ASP.NET Core中有一些built-in的Formatter，可以通过RemoveType方法移除。例如：</p><ul><li><strong>StringOutputFormatter</strong>：在默认情况下，string返回类型会以text/plain的媒体类型返回。当移除StringOutputFormatter时，会以built-in JSON Formatter -> XML Formatter -> 406 Not Acceptable的顺序返回。例如，使用以下代码移除string和Json的formatter后，并没有使用XML formatter，向返回类型为string的endpoint发送Get请求，则会返回406 Not Acceptable。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>services.AddControllers(options =&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    options.OutputFormatters.RemoveType&lt;StringOutputFormatter&gt;();
</span></span><span style=display:flex><span>    options.OutputFormatters.RemoveType&lt;SystemTextJsonOutputFormatter&gt;();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=2-自定义formatter><strong>2. 自定义Formatter</strong></h2><p>除了ASP.NET Core中提供的Formatters，我们也可以根据需求自定义Formatter，主要遵循以下几点：</p><ol><li>序列化数据并发送到客户端，创建OutputFormatter class</li><li>反序列化从客户端收到的数据，创建InputFormatter class</li><li>将自定义的Output/Input Formatter加入到Collection中。</li></ol><h2 id=自定义outputformatter><strong>自定义OutputFormatter</strong></h2><p>还是以咖啡为例，我们需要以string的形式返回今日店内提供的咖啡种类，并在返回内容内加上当前的时间。</p><h3 id=继承相应的父类并设置媒体类型与编码><strong>继承相应的父类并设置媒体类型与编码</strong></h3><p>因为返回的是string类型，需要继承TextOutputFormatter类。在构造方法中设置自定义的媒体类型和编码。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#ff79c6>public</span> <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>CoffeeMenuOutputFormatter</span> : TextOutputFormatter
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>public</span> CoffeeMenuOutputFormatter() : <span style=color:#ff79c6>base</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>            SupportedMediaTypes.Add(MediaTypeHeaderValue.Parse(<span style=color:#f1fa8c>&#34;text/menu&#34;</span>));
</span></span><span style=display:flex><span>            SupportedEncodings.Add(Encoding.UTF8);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>如果要自定义Formatter，可以参考SystemTextJsonOutputFormatter，其实现也是继承了TextOutputFormatter。</p><h3 id=重写canwritetype><strong>重写CanWriteType</strong></h3><p>CanwriteType类主要是用来判断能否被序列化器写入，这里参考官方文档的写法：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#ff79c6>protected</span> <span style=color:#ff79c6>override</span> <span style=color:#8be9fd>bool</span> CanWriteType(Type type)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#ff79c6>typeof</span>(Coffee).IsAssignableFrom(type) || <span style=color:#ff79c6>typeof</span>(IEnumerable&lt;Coffee&gt;).IsAssignableFrom(type);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>此外，有一些情况下需要重写CanWriteResult而不是CanWriteType，具体请参考<a href="https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/custom-formatters?view=aspnetcore-5.0#the-canwriteresult-method">官方文档</a>。</p><h3 id=重写writeresponsebodyasync><strong>重写WriteResponseBodyAsync</strong></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#ff79c6>public</span> <span style=color:#ff79c6>override</span> <span style=color:#ff79c6>async</span> Task WriteResponseBodyAsync(
</span></span><span style=display:flex><span>    OutputFormatterWriteContext context, Encoding selectedEncoding)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#8be9fd>var</span> httpContext = context.HttpContext;
</span></span><span style=display:flex><span>    <span style=color:#8be9fd>var</span> builder = <span style=color:#ff79c6>new</span> StringBuilder();
</span></span><span style=display:flex><span>    builder.AppendLine(<span style=color:#f1fa8c>&#34;Today&#39;s Menu&#34;</span>);
</span></span><span style=display:flex><span>    builder.AppendLine(DateTime.Now.ToString());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>if</span> (context.Object <span style=color:#ff79c6>is</span> IEnumerable&lt;Coffee&gt; coffees)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>foreach</span> (<span style=color:#8be9fd>var</span> coffee <span style=color:#ff79c6>in</span> coffees)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            builder.AppendLine(<span style=color:#f1fa8c>$&#34;{coffee.Name};{coffee.Size};{coffee.Price}&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>await</span> httpContext.Response.WriteAsync(builder.ToString(), selectedEncoding);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>最后，将CoffeeMenuOutputFormatter添加到Collection中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span>options.OutputFormatters.Add(<span style=color:#ff79c6>new</span> CoffeeMenuOutputFormatter());
</span></span></code></pre></div><p>全部完成后，使用Postman 设置Accept 为text/menu，向Controller Action请求，得到以下结果：</p><p><img src=https://pic1.zhimg.com/v2-d18fbe735e9978dc589adeb2895a0b40_b.png alt=https://pic1.zhimg.com/v2-d18fbe735e9978dc589adeb2895a0b40_b.png></p><p>关于自定义InputFormatter的方法，也是比较相似的步骤。</p><h2 id=references><strong>References:</strong></h2><ol><li>Microsoft Docs：</li></ol><ul><li><a href="https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/formatting?view=aspnetcore-5.0">https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/formatting</a></li><li><a href=https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/custom-formatters>https://docs.microsoft.com/en-us/aspnet/core/web-api/advanced/custom-formatters</a></li></ul><ol start=2><li>MDN Web Docs: <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation>https://developer.mozilla.org/en-US/docs/Web/HTTP/Content_negotiation</a></li></ol><hr><ul class=pager><li class=previous><a href=/tech/%E5%9C%A8ASP.NET-Core%E4%B8%AD%E5%BA%94%E7%94%A8JWT/ data-toggle=tooltip data-placement=top title="在ASP.NET Core中应用JWT">&larr;
Previous Post</a></li><li class=next><a href=/tech/MIT-6.824-Lab-1/ data-toggle=tooltip data-placement=top title="MIT 6.824 Lab 1">Next
Post &rarr;</a></li></ul></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/.net title=.net>.net</a>
<a href=/tags/asp.net title=asp.net>asp.net</a></div></section><section><hr><h5>FRIENDS</h5><ul class=list-inline><li><a target=_blank href></a></li></ul></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:dukesaika@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/dukezys><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/yinsong-zhao-6957901a9><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 2022 Ganymede<br>Powered by <a href=https://gohugo.io/>Hugo</a>,
Theme originated from
<a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a>
<span id=busuanzi_container_site_pv>本站总访问量<span id=busuanzi_value_site_pv></span>次</span></p></div></div></div></footer><script>function loadAsync(i,t){var n=document,s="script",e=n.createElement(s),o=n.getElementsByTagName(s)[0];e.src=i,t&&e.addEventListener("load",function(e){t(null,e)},!1),o.parentNode.insertBefore(e,o)}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,r=$(_containerSelector),a=r.find("h1,h2,h3,h4,h5,h6");return $(e).html(''),a.each(function(){n=$(this).prop("tagName").toLowerCase(),i="#"+$(this).prop("id"),s=$(this).text(),t=$('<a href="'+i+'" rel="nofollow">'+s+"</a>"),o=$('<li class="'+n+'_nav"></li>').append(t),$(e).append(o)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>